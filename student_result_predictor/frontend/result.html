<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prediction Result - Student Result Predictor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- Header Section -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card text-center">
          <div class="card-header">
            <span class="icon">üéØ</span>
            <h1>Prediction Result</h1>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Result Section -->
    <div class="row">
      <div class="col-lg-6 mb-4">
        <div class="card result-card">
          <div class="card-header">
            <span class="icon">üìä</span>
            <h2>Your Result</h2>
          </div>
          <div class="result-display">
            <div class="prediction-badge" id="predictionBadge">
              <span class="prediction-text" id="predictionText">-</span>
            </div>
            <div class="confidence-meter">
              <div class="confidence-label">Confidence Level</div>
              <div class="confidence-bar">
                <div class="confidence-fill" id="confidenceFill" style="width: 0%"></div>
              </div>
              <div class="confidence-percentage" id="confidenceText">0%</div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-6 mb-4">
        <div class="card">
          <div class="card-header">
            <span class="icon">üìù</span>
            <h2>Input Summary</h2>
          </div>
          <div class="input-summary">
            <div class="summary-item">
              <span class="icon-small">üìö</span>
              <span class="label">Study Hours:</span>
              <span class="value" id="studyHours">-</span>
            </div>
            <div class="summary-item">
              <span class="icon-small">üí§</span>
              <span class="label">Sleep Hours:</span>
              <span class="value" id="sleepHours">-</span>
            </div>
            <div class="summary-item">
              <span class="icon-small">üìÖ</span>
              <span class="label">Absences:</span>
              <span class="value" id="absences">-</span>
            </div>
            <div class="summary-item">
              <span class="icon-small">‚úÖ</span>
              <span class="label">Assignments Completed:</span>
              <span class="value" id="assignments">-</span>
            </div>
            <div class="summary-item">
              <span class="icon-small">üéØ</span>
              <span class="label">Exam Score:</span>
              <span class="value" id="examScore">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recommendations Section -->
    <div class="row">
      <div class="col-12 mb-4">
        <div class="card">
          <div class="card-header">
            <span class="icon">üí°</span>
            <h2>Recommendations</h2>
          </div>
          <div class="recommendations">
            <div class="recommendation" id="recommendationBox">
              <span class="icon-small" id="recommendationIcon">üí°</span>
              <p id="recommendationText">Loading...</p>
            </div>
            
            <div class="tips">
              <h4>Study Tips:</h4>
              <ul>
                <li>Aim for 6-8 hours of study per day for optimal performance</li>
                <li>Maintain 7-9 hours of sleep for better concentration</li>
                <li>Keep absences to a minimum to stay on track</li>
                <li>Complete all assignments to reinforce learning</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="row">
      <div class="col-12 text-center">
        <div class="action-buttons">
          <a href="index.html" class="btn-custom primary">
            <span class="icon-small">üîÑ</span>
            New Prediction
          </a>
          <button onclick="window.print()" class="btn-custom secondary">
            <span class="icon-small">üñ®Ô∏è</span>
            Print Result
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Load prediction result from sessionStorage
    const resultData = sessionStorage.getItem('predictionResult');
    
    if (!resultData) {
      // No result data, redirect to home
      window.location.href = 'index.html';
    } else {
      const data = JSON.parse(resultData);
      
      // Display prediction
      const predictionText = document.getElementById('predictionText');
      const predictionBadge = document.getElementById('predictionBadge');
      predictionText.textContent = data.prediction;
      
      if (data.prediction === 'Pass') {
        predictionBadge.classList.add('success');
      } else {
        predictionBadge.classList.add('danger');
      }
      
      // Display confidence
      const confidenceFill = document.getElementById('confidenceFill');
      const confidenceText = document.getElementById('confidenceText');
      confidenceFill.style.width = `${data.probability}%`;
      confidenceText.textContent = `${data.probability}%`;
      
      // Display input summary
      document.getElementById('studyHours').textContent = data.input.study_hours;
      document.getElementById('sleepHours').textContent = data.input.sleep_hours;
      document.getElementById('absences').textContent = data.input.absences;
      document.getElementById('assignments').textContent = data.input.assignments_completed;
      document.getElementById('examScore').textContent = data.input.exam_score;
      
      // Display recommendations
      const recommendationBox = document.getElementById('recommendationBox');
      const recommendationIcon = document.getElementById('recommendationIcon');
      const recommendationText = document.getElementById('recommendationText');
      
      if (data.prediction === 'Pass') {
        recommendationBox.classList.add('success');
        recommendationIcon.textContent = 'üåü';
        recommendationText.textContent = 'Great job! Keep up the excellent work. Your study habits and attendance are on track for success.';
      } else {
        recommendationBox.classList.add('warning');
        recommendationIcon.textContent = '‚ö†Ô∏è';
        recommendationText.textContent = 'Consider improving your study routine. Focus on increasing study time, maintaining good sleep, and reducing absences.';
      }
    }
  </script>
</body>
</html>
